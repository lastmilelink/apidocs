
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>OTD V2.0 Booking Service</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;curl&quot;,&quot;json&quot;,&quot;go&quot;,&quot;rust&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="curl">curl</a>
              <a href="#" data-language-name="json">json</a>
              <a href="#" data-language-name="go">go</a>
              <a href="#" data-language-name="rust">rust</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#quick-start" class="toc-h1 toc-link" data-title="Quick Start">Quick Start</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#signup-to-otd-sandbox" class="toc-h2 toc-link" data-title="Signup to OTD Sandbox">Signup to OTD Sandbox</a>
                  </li>
                  <li>
                    <a href="#before-you-start" class="toc-h2 toc-link" data-title="Before You Start">Before You Start</a>
                  </li>
                  <li>
                    <a href="#security" class="toc-h2 toc-link" data-title="Security">Security</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#booking-service-api-39-s-v2-0" class="toc-h1 toc-link" data-title="Booking Service API's V2.0">Booking Service API's V2.0</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-an-order" class="toc-h2 toc-link" data-title="Create an order">Create an order</a>
                  </li>
                  <li>
                    <a href="#get-it-now" class="toc-h2 toc-link" data-title="Get it now">Get it now</a>
                  </li>
                  <li>
                    <a href="#get-it-later" class="toc-h2 toc-link" data-title="Get it later">Get it later</a>
                  </li>
                  <li>
                    <a href="#returns" class="toc-h2 toc-link" data-title="Returns">Returns</a>
                  </li>
                  <li>
                    <a href="#real-time-tracking" class="toc-h2 toc-link" data-title="Real time tracking">Real time tracking</a>
                  </li>
                  <li>
                    <a href="#real-time-notifications" class="toc-h2 toc-link" data-title="Real time notifications">Real time notifications</a>
                  </li>
                  <li>
                    <a href="#search-an-order" class="toc-h2 toc-link" data-title="Search an order">Search an order</a>
                  </li>
                  <li>
                    <a href="#get-an-order" class="toc-h2 toc-link" data-title="Get an order">Get an order</a>
                  </li>
                  <li>
                    <a href="#amend-an-order" class="toc-h2 toc-link" data-title="Amend an order">Amend an order</a>
                  </li>
                  <li>
                    <a href="#cancell-an-order" class="toc-h2 toc-link" data-title="Cancell an order">Cancell an order</a>
                  </li>
                  <li>
                    <a href="#http-error-codes" class="toc-h2 toc-link" data-title="Http Error Codes">Http Error Codes</a>
                  </li>
                  <li>
                    <a href="#exceptions-incidents" class="toc-h2 toc-link" data-title="Exceptions (Incidents)">Exceptions (Incidents)</a>
                  </li>
                  <li>
                    <a href="#chronos" class="toc-h2 toc-link" data-title="Chronos">Chronos</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#web-hooks" class="toc-h1 toc-link" data-title="Web-hooks">Web-hooks</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://onthedot-bookingdraft.apigee.io' target="_blank">Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p><strong>Welcome to the On the dot Booking Service V2.0 API&#39;s Reference documentation.</strong></p>

<p>This documentation is currently in <code>Beta</code> and will be updated over the next few months. Should you require further assistance using our API&#39;s, please contact our Partner team <strong>partners@onthedot.com</strong>.</p>

<p><body>
<div class="flex-container">
  <div><a href="#get-it-now" id="close-image"><img src="images/OTD_GITN.png"></a></div>
  <div><a href="#get-it-later" id="close-image"><img src="images/OTD_GITL.png"></a></div>
  <div><a href="#return-to-depot" id="close-image"><img src="images/OTD_RTD.png"></a></div>
  <div><a href="#real-time-tracking" id="close-image"><img src="images/OTD_RTTE.png"></a></div>
  <div><a href="#real-time-notifications" id="close-image"><img src="images/OTD_RTN.png"></a></div>
</div>
</body></p>

<aside class="success">
Illustration below is a high level view of our API features and integration features. Swagger files are downloadable from the corresponding section below
</aside>

<p><img src="images/OTD-API-HLV-slate.png" alt="HLV" /></p>

<ul>
<li><p><strong>Swagger 2.0 files</strong></p>

<ul>
<li>Click <a href="swagger/v2_otd_public.yaml">here</a> to download the <code>v2_otd_public.yaml</code> file.</li>
<li><p>Click <a href="swagger/v2_otd_public.json">here</a> to download the <code>v2_otd_public.json</code> file.</p>

<p>* <code>OAS3.0 coming soon</code></p></li>
<li><p><a href="https://github.com/Rebilly/generator-openapi-repo">Find out how to create Github repo for your OpenAPI spec.</a></p></li>
</ul></li>
</ul>
<h1 id='quick-start'>Quick Start</h1><h2 id='signup-to-otd-sandbox'>Signup to OTD Sandbox</h2>
<p><img src="images/OTD_H_DEV.png" alt="Dev" /></p>

<ul>
<li><p>Signup to get access to our Sandbox <a href="https://developer.onthedot.com/create">here</a>.</p>

<ul>
<li><p>Create an app and subcribe to the sandbox API product to obtain your <code>API Token</code></p>

<ul>
<li>Child</li>
</ul></li>
</ul></li>
</ul>

<aside class="notice">
Sandbox seed data below allows developers to test their integration with orders <code><strong>within</strong> configured SLA</code> and <code><strong>outside</strong> configured SLA</code>.
</aside>

<p><strong>Account</strong></p>

<ul>
<li>Sandbox seed data <code>accountID</code> is: <strong><code>sbx-partner</code></strong></li>
</ul>

<p><strong>Places</strong></p>

<ul>
<li><p>Sandbox has 1 place configured: <strong><code>sbx-place</code></strong></p>

<ul>
<li>Maximul allowed distance for <code>sbx-place</code> is: <strong><code>X miles</code></strong></li>
</ul></li>
</ul>

<p><strong>SLA&#39;s</strong></p>

<ul>
<li>Sandbox account <code>sbx-partner</code> had the following <code>services</code> configured:<code>timeslot</code>,<code>timewindow</code>,<code>asap</code>,<code>return</code>,<code>2hour</code>,<code>3hour</code>,<code>4hour</code>,<code>sameday</code>,<code>2hour-later</code>,<code>4hour-later</code></li>
</ul>
<h2 id='before-you-start'>Before You Start</h2>
<p>Please contact OTD partners team at <a href="mailto:partners@onthedot.com">partners@onthedot.com</a> to set up the following:</p>

<ul>
<li>Account</li>
<li>Service types</li>
<li>Places (optional)</li>
</ul>
<h3 id='job-journey-type'>Job Journey Type</h3>
<p>Each job must have a <code>&lt;order&gt;.&lt;job&gt;.metadata.journeyType</code> defined.  The valid values are:</p>

<table><thead>
<tr>
<th><code>journeyType</code> values</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>delivery</code></td>
<td>The job is a normal delivery job (usually from store to home)</td>
</tr>
<tr>
<td><code>return</code></td>
<td>The job is a return of some products (usually from home to store)</td>
</tr>
</tbody></table>

<blockquote>
<p><strong>Note</strong>: regardless of <code>journeyType</code>, <code>collection</code> is always the pick up location, and <code>delivery</code> is always the drop off location.</p>
</blockquote>
<h3 id='service-type'>Service Type</h3>
<p>A service type defines a set of pre-agreed constraints for orders.  A new user must have the service type set up before they can create orders.</p>

<p>Currently supported service types: <code>timeslot</code>, <code>asap</code>, <code>return</code>, <code>2hour</code>, <code>3hour</code>, <code>4hour</code>, <code>sameday</code>, <code>2hour-later</code>, <code>4hour-later</code>.</p>
<h3 id='place'>Place</h3>
<p>Each stop must contain a valid place(address), which represents a physical location.</p>

<p>The user can either contact OTD to set up places for them so they can use a place ID when creating orders, or use a valid address instead.</p>
<h3 id='status'>Status</h3>
<p>Both <code>order</code> and <code>job</code> have status.  They are updated with realtime events.</p>
<h3 id='job-status'>Job Status</h3>
<blockquote>
<p>Status representing a job&#39;s execution state.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"progressStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"allocated"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:18:53.087Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"courierStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1701</span><span class="p">,</span><span class="w">
      </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.5701</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:18:53.087Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"incidents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85ad3dd6-05d3-4023-b1e6-74042b7ff138"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1B"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Partner Cancellation"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"impact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7H"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unable to Fulfil Order"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:18:53.087Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:18:53.087Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Here is an example job status object.</p>

<ul>
<li>Job status is further divided into the following types.</li>
</ul>
<h3 id='progress-status'>Progress Status</h3>
<p>Example:
<code>json
&quot;progressStatus&quot;: {
  &quot;status&quot;: &quot;allocated&quot;,
  &quot;updatedAt&quot;: &quot;2019-01-02T13:18:53.087Z&quot;
}
</code></p>

<blockquote>
<p><code>Nearby</code> is a new status trigger when a courier is xx metres from a stop.</p>
</blockquote>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>created</code></td>
<td>The job was created.</td>
</tr>
<tr>
<td><code>allocated</code></td>
<td>A courier has accepted the job.</td>
</tr>
<tr>
<td><code>arrived_at_collection</code></td>
<td>Courier has arrived at the collection address.</td>
</tr>
<tr>
<td><code>collected</code></td>
<td>Courier has collected the item.</td>
</tr>
<tr>
<td><code>arrived_at_delivery</code></td>
<td>Courier has arrived at the delivery address.</td>
</tr>
<tr>
<td><code>delivered</code></td>
<td>Courier has delivered the item.</td>
</tr>
<tr>
<td><code>cancelled</code></td>
<td>The job has been cancelled (this means the whole order has been cancelled too).</td>
</tr>
<tr>
<td><code>returned_to_depot</code></td>
<td>Courier failed to deliver the item and it has been returned to depot.</td>
</tr>
<tr>
<td><code>offline</code></td>
<td>The job is offline (this means an internal error, please contact OTD support).</td>
</tr>
</tbody></table>
<h3 id='order-status'>Order Status</h3>
<p>Order status is an aggregation of job statuses.</p>

<p>Example:</p>

<table><thead>
<tr>
<th>Job 1 Status</th>
<th>Job 2 Status</th>
<th>Order Status</th>
</tr>
</thead><tbody>
<tr>
<td><code>created</code></td>
<td><code>created</code></td>
<td><code>created</code></td>
</tr>
<tr>
<td><code>allocated</code></td>
<td><code>created</code></td>
<td><code>in_progress</code></td>
</tr>
<tr>
<td><code>delivered</code></td>
<td><code>allocated</code></td>
<td><code>in_progress</code></td>
</tr>
<tr>
<td><code>delivered</code></td>
<td><code>offline</code></td>
<td><code>in_progress</code>, because <code>off_line</code> is not considered completed</td>
</tr>
<tr>
<td><code>allocated</code></td>
<td><code>returned_to_depot</code></td>
<td><code>in_progress</code></td>
</tr>
<tr>
<td><code>delivered</code></td>
<td><code>returned_to_depot</code></td>
<td><code>completed</code></td>
</tr>
<tr>
<td><code>delivered</code></td>
<td><code>delivered</code></td>
<td><code>completed</code></td>
</tr>
<tr>
<td><code>cancelled</code></td>
<td><code>cancelled</code></td>
<td><code>cancelled</code></td>
</tr>
<tr>
<td><code>delivered</code></td>
<td><code>cancelled</code></td>
<td>This never happens</td>
</tr>
<tr>
<td><code>returned_to_depot</code></td>
<td><code>cancelled</code></td>
<td><code>cancelled</code>, this can only happen if customer cancelled the order and then returned to depot was called.</td>
</tr>
</tbody></table>
<h3 id='courier-status'>Courier Status</h3>
<p>Example:
<code>json
&quot;courierStatus&quot;: {
  &quot;location&quot;: {
    &quot;longitude&quot;: 0.1701,
    &quot;latitude&quot;: 51.5701
  },
  &quot;updatedAt&quot;: &quot;2019-01-02T13:18:53.087Z&quot;
}
</code>
* This gives the realtime courier location data.</p>
<h2 id='security'>Security</h2>
<p><strong>All APIs require an <code>Authorization</code> header.</strong></p>

<ul>
<li>You will need to register <a href="https://developer.onthedot.com/create">here</a> to obtain a token by creating an <code>app</code> and subscribing to our <code>Sandbox</code>.</li>
<li>The <code>token</code>  must be used in the request headers as <code>Authorization:{{Token}}</code> header. </li>
</ul>
<h3 id='authentication'>Authentication</h3>
<table><thead>
<tr>
<th>apiKey</th>
<th><em>API Key</em></th>
</tr>
</thead><tbody>
</tbody></table>
<h1 id='booking-service-api-39-s-v2-0'>Booking Service API&#39;s V2.0</h1><h2 id='create-an-order'>Create an order</h2><pre class="highlight rust tab-rust"><code><span class="p">{</span>
  <span class="s">"id"</span><span class="p">:</span> <span class="s">"unique partner order number"</span><span class="p">,</span>

  <span class="s">"metaData"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"clientRefId"</span><span class="p">:</span> <span class="s">"unique partner order number"</span><span class="p">,</span>
    <span class="s">"serviceType"</span><span class="p">:</span> <span class="s">"4hour"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s">"customData"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"reference_1"</span><span class="p">:</span> <span class="s">"PartnerName"</span><span class="p">,</span>
        <span class="s">"reference_2"</span><span class="p">:</span> <span class="s">"PartnerStore - Staples Corner”,
        'reference_3"</span><span class="p">:</span> <span class="s">"4002”,
        'citytrak-department"</span><span class="p">:</span> <span class="s">"unique partner order number”
  },
  ...
      "</span><span class="n">requires</span><span class="s">": [
                "</span><span class="n">ageVerification</span><span class="s">",
                "</span><span class="n">collectionSignOff</span><span class="s">",
                "</span><span class="n">deliverySignOff</span><span class="s">"
      ],
  ...
}
</span></code></pre>
<p>Below you have specific examples for each of the order types you can create using our <code>booking service</code>.</p>

<ul>
<li>Consideration must be given to the following attributes shown left in <code>metaData</code>, <code>customData</code> and <code>requires</code> sections of request body depending on the agreed operations flow with us.</li>
</ul>

<hr>

<ul>
<li><code>POST</code> /V2/ACCOUNTS/{ACCOUNTID}/ORDERS</li>
</ul>

<hr>

<aside class="success">
  <strong>Summary:</strong> Create order
  <strong>Description</strong> This API creates an order with the specified ID.
</aside>

<p>This API allows the caller to set all the job, stops, notifcations, timeslots, stops, items... with their own values.</p>

<p>If the caller sends only timeslot ID or place ID, then the relevant services will be called to get the details.</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>path</td>
<td>account ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>body</td>
<td>body</td>
<td>Order object that needs to be created</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
</tr>
</tbody></table>

<hr>
<h2 id='get-it-now'>Get it now</h2>
<aside class="success">
The <code>code</code> panel exemplifies how to send an <code>Express/ASAP</code> request
</aside>

<blockquote>
<p><code>POST</code>  URL<code>/v2/accounts/</code>myaccount`/orders</p>
</blockquote>
<pre class="highlight plaintext"><code>curl -X POST \
  'http://{{host}}/{{bookingService}}/v2/accounts/{{myaccount}}/orders' \
  -H 'authorization: &lt;your_api_token&gt;' \
  -H 'content-type: application/json' \
  -H 'x-trace-id: 79b6b8b6-d0df-4e12-8f4d-4b435162f4e7' \
  -d '

{
  "id": "myorder",
  "metadata": {
    "serviceType": "asap"
  },
  "jobs": [
    {
      "id": "job0",
      "metadata": {
        "journeyType": "delivery"
      },
      "items": [
        {
          "id": "itemgroup0:item0",
          "quantity": 1
        }
      ],
      "collection": {
        "stopId": "stop0"
      },
      "delivery": {
        "stopId": "stop1"
      },
      "timeslot": {
        "collection": {
          "from": "2019-01-02T13:30:00.000Z",
          "to": "2019-01-02T14:30:00.000Z"
        },
        "delivery": {
          "from": "2019-01-02T18:30:00.000Z",
          "to": "2019-01-02T19:30:00.000Z"
        }
      }
    }
  ],
  "stops": [
    {
      "id": "stop0",
      "place": {
        "address": {
          "country": "GBR",
          "town": "London",
          "streets": [
            "Royal Opera House",
            "Bow Street"
          ],
          "postcode": "WC2E 9DD"
        }
      }
    },
    {
      "id": "stop1",
      "place": {
        "address": {
          "country": "GBR",
          "town": "London",
          "streets": [
            "English National Opera",
            "St Martin's Lane"
          ],
          "postcode": "WC2N 4ES"
        }
      }
    }
  ]
}
</code></pre>
<blockquote>
<p><strong><em>Note</em></strong> The above command returns the following JSON response.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myorder"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vehicleType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bicycle"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"serviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asap"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trackingUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://trackmydriver-prod.lastmilelink.eu/myaccount::myorder?token=7%2FI9ZlUZ7rnNBUkKORI2fGrPdEIaMV%2BNkrYbLFSQQW4%3D"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jobs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"journeyType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivery"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"itemgroup0:item0"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"stopId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"delivery"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"stopId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop1"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"timeslot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:30:00.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T14:30:00.000Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"delivery"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T18:30:00.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T19:30:00.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"progressStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:30:00.048Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"stops"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"place"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.1265741</span><span class="p">,</span><span class="w">
            </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.5136986</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"town"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"streets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"Royal Opera House"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Bow Street"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WC2E 9DD"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"place"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.1288661</span><span class="p">,</span><span class="w">
            </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.5098553</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"town"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"streets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"English National Opera"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"St Martin's Lane"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WC2N 4ES"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:30:00.048Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:30:00.048Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:30:00.048Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><img src="images/OTD_H_GITN.png" alt="Express/ASAP" /></p>
<h2 id='get-it-later'>Get it later</h2>
<aside class="success">
The request in the <code>code pane</code> will create an order scheduled for later same day or another day in the future.
</aside>

<p><img src="images/OTD_H_GITL.png" alt="Scheduled" /></p>
<h2 id='returns'>Returns</h2>
<aside class="success">
The request sample in the left <code>code pane</code> will create a return to depot order.
</aside>

<p><img src="images/OTD_H_RTD.png" alt="Returns to Depot/Origin" /></p>
<h2 id='real-time-tracking'>Real time tracking</h2>
<aside class="success">
  Real time tracking and dynamic ETA's : <code><strong>ETC</strong> ( estimated time of collection )</code> and <code><strong>ETD</strong> ( estimated time of delivery )</code>
</aside>

<p><img src="images/OTD_H_RTTE.png" alt="Real Time Notifications" /></p>
<h2 id='real-time-notifications'>Real time notifications</h2>
<p><img src="images/OTD_H_RTN.png" alt="Real Time Notifications" /></p>
<h2 id='search-an-order'>Search an order</h2><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">code_sample</span><span class="w">

</span></code></pre>
<hr>

<ul>
<li><code>POST</code> /v2/accounts/{accountId}/orders/search</li>
</ul>

<hr>

<aside class="success">
  <strong>Summary:</strong> Search an order
  <strong>Description</strong> This API returns a list of orders based on the provided search criteria.
</aside>

<p><code>createdAt</code>, <code>collectedBy</code> and <code>deliveredBy</code> are time ranges.  If there are multiple jobs in the order, then any job satisfying these will cause the order to be returned.</p>

<p><code>coordinates</code> can be any point on Earth.</p>

<p>Paging is supported.  See request and response for details.</p>

<p><strong>HTTP Request</strong>
<code>POST</code><code>/v2/accounts/{accountId}/orders/search</code> </p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>path</td>
<td>account ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>body</td>
<td>body</td>
<td>The search order parameters</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
</tbody></table>
<h2 id='get-an-order'>Get an order</h2><pre class="highlight json tab-json"><code><span class="w">
</span><span class="err">code_sample</span><span class="w">

</span></code></pre>
<hr>

<ul>
<li><code>GET</code> /v2/accounts/{accountId}/orders/{orderId}</li>
</ul>

<hr>

<aside class="success">
  <strong>Summary:</strong> <code>GET</code> order
  <strong>Description</strong> This API gets an order by <code>accountID</code> and <code>orderID</code>.
</aside>

<p><strong>HTTP Request</strong>
<code>GET</code> /v2/accounts/{accountId}/orders/{orderId}</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>path</td>
<td>account ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>orderId</td>
<td>path</td>
<td>order ID</td>
<td>Yes</td>
<td>string</td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>404</td>
<td>Not found</td>
</tr>
</tbody></table>
<h2 id='amend-an-order'>Amend an order</h2><pre class="highlight json tab-json"><code><span class="err">code</span><span class="p">:</span><span class="err">sample</span><span class="w">
</span></code></pre>
<hr>

<ul>
<li><code>PUT</code> /V2/ACCOUNTS/{ACCOUNTID}/ORDERS/{ORDERID}/AMEND</li>
</ul>

<hr>

<aside class="success">
  <strong>Summary:</strong> Amend order
  <strong>Description</strong> This API amends an order and updates the corresponding jobs in COSMO.
</aside>

<p>The following rules apply:</p>

<ol>
<li><p>The order must already exist.</p></li>
<li><p>For each job of the order:</p></li>
</ol>

<p>1) If only <code>items</code> is updated, then the job&#39;s progress status must be one of <code>created</code>, <code>allocated</code>, <code>arrived_at_collection</code> (i.e., amending is not allowed after collection).</p>

<p>2) If any other field is changed (including <code>timeslot</code>, <code>metadata</code>), then the job&#39;s progress status must be <code>created</code> (i.e., amending is not allowed after allocation).</p>

<p>3) Collection and delivery stop IDs cannot be changed.</p>

<p>4) If stops corresponding to the job are changed, then rule 2) applies.</p>

<p>Note <code>customData</code> uses incremental update.  All other fields are full-replacement update.</p>

<p>** HTTP Request **
<code>PUT /v2/accounts/{accountId}/orders/{orderId}/amend</code> </p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>path</td>
<td>account ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>orderId</td>
<td>path</td>
<td>order ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>body</td>
<td>body</td>
<td>The cancel order parameters</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity</td>
</tr>
</tbody></table>

<p>Orders and jobs can be amended after they are created, subject to certain conditions:</p>

<ul>
<li>Job&#39;s stop and timing details cannot be amended after it has entered <code>allocated</code> state.</li>
<li>Job&#39;s item details cannot be amended after it has entered <code>collected</code> state.</li>
</ul>
<h2 id='cancell-an-order'>Cancell an order</h2><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">code_sample</span><span class="w">

</span></code></pre>
<hr>

<ul>
<li><code>PUT</code> /v2/accounts/{accountId}/orders/{orderId}/cancel</li>
</ul>

<hr>

<aside class="success">
  <strong>Summary:</strong> Cancel order
  <strong>Description</strong> This API can be used to cancel an order, under the following conditions:
</aside>

<p>Orders can be cancelled if and only if all of the jobs are in <code>created</code> state.</p>

<ol>
<li><p>The order exists.</p></li>
<li><p>None of the jobs of the order have the status <code>collected</code> yet.</p></li>
</ol>

<p>Once an order is cancelled, it cannot be re-created or un-cancelled.  You will need to create a new order in this case.</p>

<p><strong>HTTP Request</strong>
<code>PUT</code> /v2/accounts/{accountId}/orders/{orderId}/cancel</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>path</td>
<td>account ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>orderId</td>
<td>path</td>
<td>order ID</td>
<td>Yes</td>
<td>string</td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
</tbody></table>
<h2 id='http-error-codes'>Http Error Codes</h2><pre class="highlight json tab-json"><code><span class="err">Sample</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">response</span><span class="p">:</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booking:0203"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job not found"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"more details"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code>All error messages have the following format.</code></p>

<p>Below is a table with all <code>error codes</code> and <code>http</code> response code.</p>

<table><thead>
<tr>
<th>full code</th>
<th>http code</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>default:0000</td>
<td>500</td>
<td>Unknown</td>
</tr>
<tr>
<td>default:0001</td>
<td>400</td>
<td>Invalid request</td>
</tr>
<tr>
<td>default:0002</td>
<td>404</td>
<td>Not found</td>
</tr>
<tr>
<td>booking:0101</td>
<td>500</td>
<td>geocode service failed</td>
</tr>
<tr>
<td>booking:0102</td>
<td>500</td>
<td>place service failed</td>
</tr>
<tr>
<td>booking:0103</td>
<td>500</td>
<td>SLA service failed</td>
</tr>
<tr>
<td>booking:0104</td>
<td>500</td>
<td>job service failed</td>
</tr>
<tr>
<td>booking:0105</td>
<td>500</td>
<td>chronos service failed</td>
</tr>
<tr>
<td>booking:0106</td>
<td>500</td>
<td>capacity service failed</td>
</tr>
<tr>
<td>booking:0107</td>
<td>500</td>
<td>account service failed</td>
</tr>
<tr>
<td>booking:0108</td>
<td>500</td>
<td>tracking service failed</td>
</tr>
<tr>
<td>booking:0108</td>
<td>500</td>
<td>capacity service (zone API) failed</td>
</tr>
<tr>
<td>booking:0202</td>
<td>422</td>
<td>invalid place. please create a support ticket to configure your account with otd</td>
</tr>
<tr>
<td>booking:0203</td>
<td>422</td>
<td>invalid SLA. please create a support ticket to configure your account with otd</td>
</tr>
<tr>
<td>booking:0206</td>
<td>422</td>
<td>invalid timeslot. please create a support ticket to configure your account with otd</td>
</tr>
<tr>
<td>booking:0207</td>
<td>422</td>
<td>invalid capacity. please create a support ticket to configure your account with otd</td>
</tr>
<tr>
<td>booking:0208</td>
<td>422</td>
<td>invalid account. please create a support ticket to configure your account with otd</td>
</tr>
<tr>
<td>booking:0210</td>
<td>422</td>
<td>invalid zone. please create a support ticket to configure your account with otd</td>
</tr>
<tr>
<td>booking:0301</td>
<td>422</td>
<td>order not cancellable</td>
</tr>
<tr>
<td>booking:0302</td>
<td>409</td>
<td>concurrent modification</td>
</tr>
<tr>
<td>booking:0303</td>
<td>500</td>
<td>failed to delete job</td>
</tr>
<tr>
<td>booking:0304</td>
<td>400</td>
<td>order not amendable</td>
</tr>
<tr>
<td>booking:02XX</td>
<td>500</td>
<td>unknown server error with On the dot services</td>
</tr>
<tr>
<td>booking:401</td>
<td>401</td>
<td>Invalid authentication credentials</td>
</tr>
<tr>
<td>booking:403</td>
<td>403</td>
<td>Permission denied to access resource</td>
</tr>
</tbody></table>
<h2 id='exceptions-incidents'>Exceptions (Incidents)</h2><pre class="highlight json tab-json"><code><span class="s2">"incidents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85ad3dd6-05d3-4023-b1e6-74042b7ff138"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1B"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Partner Cancellation"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"impact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7H"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unable to Fulfil Order"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:18:53.087Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-02T13:18:53.087Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<aside class="success">
COSMO has an internal `Incident` service responsable of managing any job real time exceptions during:
</aside>

<ul>
<li><code>Collection</code></li>
<li><code>Transit</code></li>
<li><code>Delivery</code></li>
</ul>

<p>The service will log the <code>code, verbose reason</code> then trigger various notifcations if configured, for example send web-hooks, sms&#39;s or e-mails.</p>

<p>Incidents represents a list of exceptions that happened during the job&#39;s lifetime.</p>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>created</code></td>
<td>An incident was created for the job.</td>
</tr>
<tr>
<td><code>deleted</code></td>
<td>An incident was deleted from the job.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Apply to stops</th>
</tr>
</thead><tbody>
<tr>
<td>1A</td>
<td>Partner Amendment</td>
<td>na</td>
</tr>
<tr>
<td>1B</td>
<td>Partner Cancellation</td>
<td>collection, delivery</td>
</tr>
<tr>
<td>1C</td>
<td>COA</td>
<td>collection</td>
</tr>
<tr>
<td>1D</td>
<td>Cannot Verify Age</td>
<td>na</td>
</tr>
<tr>
<td>1F</td>
<td>Collection too Far</td>
<td>na</td>
</tr>
<tr>
<td>8A</td>
<td>Outside Timeslot - Control</td>
<td>na</td>
</tr>
<tr>
<td>8B</td>
<td>Outside Timeslot - Courier</td>
<td>na</td>
</tr>
<tr>
<td>8C</td>
<td>Outside Timeslot - Short</td>
<td>na</td>
</tr>
<tr>
<td>8D</td>
<td>Traffic Incident – Notified</td>
<td>na</td>
</tr>
<tr>
<td>9A</td>
<td>Arrived On Time</td>
<td>collection, delivery</td>
</tr>
<tr>
<td>9B</td>
<td>Card Left</td>
<td>delivery</td>
</tr>
<tr>
<td>9C</td>
<td>Citytrakker Issues</td>
<td>na</td>
</tr>
<tr>
<td>9D</td>
<td>Consignment Damaged</td>
<td>collection, delivery</td>
</tr>
<tr>
<td>9E</td>
<td>Contact Unavailable</td>
<td>na</td>
</tr>
<tr>
<td>9G</td>
<td>Courier Broken Down</td>
<td>na</td>
</tr>
<tr>
<td>9I</td>
<td>Held Up On Previous Delivery</td>
<td>collection</td>
</tr>
<tr>
<td>9J</td>
<td>Delayed Onsite By Client</td>
<td>collection, delivery</td>
</tr>
<tr>
<td>9K</td>
<td>Collected/Delivered Early</td>
<td>collection, delivery</td>
</tr>
<tr>
<td>9L</td>
<td>Outside Timeslot (Client Req)</td>
<td>delivery</td>
</tr>
<tr>
<td>9M</td>
<td>Collected/Delivered Late</td>
<td>collection, delivery</td>
</tr>
<tr>
<td>9N</td>
<td>Delivery Refused</td>
<td>delivery</td>
</tr>
<tr>
<td>9O</td>
<td>Goods Not Ready</td>
<td>collection</td>
</tr>
<tr>
<td>9P</td>
<td>Incorrect Address</td>
<td>collection</td>
</tr>
<tr>
<td>9R</td>
<td>Late - Out Of Time</td>
<td>na</td>
</tr>
<tr>
<td>9S</td>
<td>Late - Unable To Deliver</td>
<td>na</td>
</tr>
<tr>
<td>9T</td>
<td>Nobody Home/No Answer</td>
<td>delivery</td>
</tr>
<tr>
<td>9U</td>
<td>Police Incident</td>
<td>na</td>
</tr>
<tr>
<td>9V</td>
<td>Redirected</td>
<td>na</td>
</tr>
<tr>
<td>9W</td>
<td>Rta/Traffic Conditions</td>
<td>na</td>
</tr>
<tr>
<td>9X</td>
<td>Unable To Locate/Company Moved</td>
<td>delivery</td>
</tr>
<tr>
<td>9Y</td>
<td>Weather Conditions</td>
<td>na</td>
</tr>
</tbody></table>
<h2 id='chronos'>Chronos</h2><pre class="highlight json tab-json"><code><span class="w">
</span><span class="err">sample_code</span><span class="w">

</span></code></pre>
<hr>

<p><code>POST</code> /V2/ACCOUNTS/{ACCOUNTID}/TIMESLOTS</p>

<hr>

<aside class="success">
<strong>Summary:</strong> Get available timeslots for a booking

<strong>Description:</strong> This API returns a list of available timeslots. Allows the options to be 
presented to an end-user for selection.
</aside>

<p><strong>HTTP Request</strong>
<code>POST</code> /v2/accounts/{accountId}/timeslots` </p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>path</td>
<td>account ID</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>body</td>
<td>body</td>
<td>Chronos parameters</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
</tbody></table>
<h1 id='web-hooks'>Web-hooks</h1><pre class="highlight json tab-json"><code><span class="w">
</span><span class="err">sample_code</span><span class="w">

</span></code></pre>
<hr>

<p><code>POST</code> /V2/ACCOUNTS/{ACCOUNTID}/TIMESLOTS</p>

<hr>

<aside class="success">
<strong>Summary</strong> Get push notifcations on the endpoint of your choice

<strong>Description</strong> This API returns a push messages for a range of events or exceptions
</aside>

<!-- Converted with the swagger-to-slate https://github.com/lavkumarv/swagger-to-slate -->

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="curl">curl</a>
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="go">go</a>
                <a href="#" data-language-name="rust">rust</a>
          </div>
      </div>
    </div>
  </body>
</html>
